Prompt 1 (Initial Version)

Description:
A comprehensive system prompt defining the assistantâ€™s role, required document fields, function usage rules, and conversation flow.

Key Issue:
Although the prompt listed required fields, it did not enforce exact field names or strict function-call ordering. As a result, the LLM frequently generated documents without first replacing placeholders, or generated them without storing user data because extract_information was never triggered.

Reason for Revision:
To ensure the model consistently:

Captures every required data field, and

Calls extract_information before generate_document
the prompt needed stricter constraints and explicit field-name requirements.

Prompt 2 (Intermediate Revision)

Description:
This prompt introduced explicit field names for each document type (e.g., disclosing_party, term_years, etc.) and provided clear examples of valid extract_information calls. It also emphasized that the LLM must use these exact keys when storing data.

Key Issue:
While field extraction improved, the model still occasionally:

Skipped extract_information,

Called generate_document prematurely, or

Called generate_document with {} (an empty object), causing the merged session data to be empty.

Reason for Revision:
The model needed a much more forceful, explicit rule set to guarantee a two-step process:

Store data

Generate document

Prompt 3 (Current Version, the Final Prompt)

Description:
A refined system prompt with high-visibility warnings and rigid rules governing function-call order.

Major Improvements:

Introduced CRITICAL FUNCTION CALLING RULES, including:

NEVER call generate_document before extract_information

ALWAYS pass the full extracted_data to both functions

Calling generate_document with {} is FORBIDDEN

Added a clearly labeled MANDATORY TWO-STEP PROCESS

Reduced non-critical verbosity to make essential instructions unavoidable

Strengthened language to eliminate ambiguity in expected behavior

Reason for Revision:
Despite earlier instructions, the model still skipped data extraction. This final version uses stronger directive phrasing, warnings, and unambiguous steps to enforce correct behavior consistently.

Summary
Across three iterations, the prompt evolved from a descriptive assistant persona to a highly structured, rule-driven system prompt. The final prompt reliably ensures:
Complete field extraction
Correct use of function calls
Proper document generation without placeholders
Robust handling of conversation context
This process demonstrates targeted debugging, systematic refinement, and deliberate prompt-design techniques aligned with professional LLM application development.